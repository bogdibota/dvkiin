{"version":3,"file":"index.es.js","sources":["../../../../node_modules/clsx/dist/clsx.m.js","../../../material-commons/src/lib/hooks/modal.ts","../../../material-commons/src/lib/hooks/index.ts","../../../material-commons/src/lib/index.ts","../../../material-commons/src/components/Table/Table.styles.ts","../../../material-commons/src/components/Table/index.tsx","../../../material-commons/src/components/Table/defaultActions.tsx","../../../material-commons/src/components/Modals/common.tsx","../../../material-commons/src/components/Modals/InfoModal.tsx","../../../material-commons/src/components/Form/context.ts","../../../material-commons/src/components/Form/input/Checkbox.tsx","../../../material-commons/src/components/Form/input/ComboBox.tsx","../../../material-commons/src/components/Form/input/DateTime.tsx","../../../material-commons/src/components/Form/input/Default.tsx","../../../material-commons/src/components/Form/styles.ts","../../../material-commons/src/components/Form/input/File.tsx","../../../material-commons/src/components/Form/input/Hidden.tsx","../../../material-commons/src/components/Form/input/Image.tsx","../../../material-commons/src/components/Modals/ConfirmationModal.tsx","../../../material-commons/src/components/placeholders.tsx","../../../material-commons/src/components/Form/domain.ts","../../../material-commons/src/components/Form/input/List.tsx","../../../material-commons/src/components/Form/input/Select.tsx","../../../material-commons/src/components/Form/index.tsx","../../../material-commons/src/components/Button/FloatingButton.tsx","../../../material-commons/src/components/Modals/InputModal.tsx","../../../material-commons/src/components/Modals/ErrorModal.tsx","../../../material-commons/src/components/Modals/SuccessSnackbar.tsx"],"sourcesContent":["function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","import { useCallback, useState } from 'react';\n\nexport type ModalState<TData> = {\n  isOpen: boolean,\n  data: TData | undefined\n};\n\nexport type ModalStates<TData = any> = {\n  [key: string]: ModalState<TData>\n}\n\nexport function useModal<TData = any>(): {\n  isOpen: boolean,\n  data?: TData,\n  open: (data?: TData) => void,\n  close: () => void,\n} {\n  const [ { isOpen, data }, setModalState ] = useState({ isOpen: false } as ModalState<TData>);\n\n  const open = useCallback((data?: TData) => {\n    setModalState({ isOpen: true, data });\n  }, [ setModalState ]);\n\n  const close = useCallback(() => {\n    setModalState({ isOpen: false, data: undefined });\n  }, [ setModalState ]);\n\n  return {\n    isOpen,\n    data,\n    open,\n    close,\n  };\n}\n\nexport function useModals(modalNames: string[]) {\n  const [ modalState, setModalState ] = useState(\n    modalNames.reduce((acc, modalName) => ({\n      ...acc,\n      [modalName]: { isOpen: false },\n    } as ModalStates), {} as ModalStates));\n\n  const open = (modalName: string) => (data: any) =>\n    setModalState((oldState: ModalStates) => ({ ...oldState, [modalName]: { isOpen: true, data } }));\n\n  const close = (modalName: any) => () =>\n    setModalState((oldState: ModalStates) => ({ ...oldState, [modalName]: { isOpen: false } }));\n\n  return modalNames.reduce((acc, modalName: string) => ({\n    ...acc, [modalName]: {\n      isOpen: modalState[modalName].isOpen,\n      data: modalState[modalName].data,\n      open: open(modalName),\n      close: close(modalName),\n    },\n  }), {});\n}\n","import { useReducer } from 'react';\n\nexport function useIncrementalKey(): [ number, () => void ] {\n  const [ key, incrementKey ] = useReducer(oldKey => oldKey + 1, 0);\n\n  return [ key, incrementKey as () => void ];\n}\n\nexport * from './modal';\n","export * from './hooks';\n\nexport function uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = Math.random() * 16 | 0, v = c === 'x' ? r : ((r & 0x3) | 0x8);\n    return v.toString(16);\n  });\n}\n\nexport function deepGet(obj: any, property: string, defaultValue?: any): any {\n  if (!obj) return defaultValue;\n\n  if (/\\./g.test(property)) {\n    const properties = property.split('.');\n    return deepGet(obj[properties[0]], properties.slice(1).join('.'), defaultValue);\n  } else {\n    return [ undefined, null ].indexOf(obj[property]) === -1 ? obj[property] : defaultValue;\n  }\n}\n\nexport function deepSet(obj: any, property: string, value: any): any {\n  if (/\\./g.test(property)) {\n    const properties = property.split('.');\n    if (!obj[properties[0]]) {\n      obj[properties[0]] = {};\n    }\n    deepSet(obj[properties[0]], properties.slice(1).join('.'), value);\n  } else {\n    obj[property] = value;\n  }\n}\n\nexport function d(value: any, marker: string = ' '): any {\n  if (typeof value === 'function') {\n    return function (...args: any[]): any {\n      const res = value(...args);\n      console.log(marker, args, res);\n      return res;\n    };\n  } else {\n    console.log(marker, value);\n    return value;\n  }\n}\n\nexport function lett<TIn, TOut>(value: TIn | undefined | null, closure: (it: TIn) => TOut): TOut | undefined | null {\n  if (value === undefined || value === null) return value as undefined | null;\n  return closure(value);\n}\n\ntype DebounceableFunction = (...args: any[]) => void\n\nexport function debounce(callback: DebounceableFunction, time: number): DebounceableFunction {\n  let interval: number | null;\n  return (...args: any) => {\n    interval && clearTimeout(interval);\n    interval = setTimeout(() => {\n      interval = null;\n      callback(...args);\n    }, time);\n  };\n}\n","import { createStyles, Theme } from '@material-ui/core';\n\nexport default (theme: Theme) => createStyles({\n  pagination: {\n    display: 'flex',\n    justifyContent: 'left',\n  },\n  actionsCol: {\n    width: theme.spacing(7),\n    padding: 0,\n    '&:last-child': {\n      padding: 0,\n    },\n  },\n  actionsButton: {\n    float: 'right',\n  },\n  thumbnail: {\n    maxWidth: 60,\n    maxHeight: 60,\n  },\n  thumbnailWrapper: {\n    width: 1,\n    paddingRight: theme.spacing(2),\n    textAlign: 'center',\n  },\n  thumbnailRowWrapper: {\n    paddingTop: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n    lineHeight: 0,\n  },\n});\n","import { Table, withStyles } from '@material-ui/core';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MenuIcon from '@material-ui/icons/MoreVert';\nimport clsx from 'clsx';\nimport React, { Component, ComponentType, forwardRef, ForwardRefExoticComponent, Ref } from 'react';\n\nimport { deepGet } from '../../lib';\n\nimport { DVKAction } from './defaultActions';\nimport { DVKColumn, DVKPagination, DVKSort } from './domain';\nimport styles from './Table.styles';\n\nexport type MenuActionProps = {\n  name: string, label?: string, color?: string,\n  onClick?: (target?: Element) => void,\n  actionTarget?: Element,\n  closeActionsMenu?: () => void,\n  Icon?: ComponentType\n}\n\nconst MenuAction: ForwardRefExoticComponent<MenuActionProps> = forwardRef((\n  { name, label, color, onClick, actionTarget, closeActionsMenu, Icon },\n  ref: Ref<HTMLLIElement>,\n) => {\n  if (name === 'divider') return <Divider/>;\n  if (!onClick || !closeActionsMenu || !Icon) return null;\n\n  return <MenuItem\n    ref={ ref }\n    style={ { color: color || 'default' } }\n    onClick={ () => {\n      onClick(actionTarget);\n      closeActionsMenu();\n    } }\n  >\n    <ListItemIcon>\n      <Icon/>\n    </ListItemIcon>\n    <ListItemText primary={ label }/>\n  </MenuItem>;\n});\n\nexport type DVKTableProps = {\n  pagination?: DVKPagination\n  sort?: DVKSort | null\n  onPaginationSortUpdate?: (pagination: DVKPagination | undefined, sort: DVKSort | null | undefined) => void,\n\n  total?: number,\n  className?: string,\n  actions?: DVKAction[],\n  rows: any[],\n  columns: DVKColumn[],\n\n  onRowClick?: (row: any) => void,\n\n  classes: any,\n}\n\ntype DVKTableState = {\n  actionsMenuAnchor?: Element,\n  actionTarget?: Element,\n}\n\nclass DVKTable extends Component<DVKTableProps, DVKTableState> {\n  static defaultProps: DVKTableProps;\n\n  state = {\n    actionsMenuAnchor: undefined,\n    actionTarget: undefined,\n  };\n\n  createSortHandler = (property: string) => () => {\n    this.handleSort(property);\n  };\n\n  handleSort = (property: string) => {\n    const { onPaginationSortUpdate, sort, pagination } = this.props;\n    if (!onPaginationSortUpdate) return;\n\n    const { orderBy, order } = sort || { orderBy: '', order: '' };\n    const newOrder = orderBy === property && order === 'asc' ? 'desc' : 'asc';\n    onPaginationSortUpdate(\n      pagination ? { ...pagination, page: 0 } : undefined,\n      { order: newOrder, orderBy: property },\n    );\n  };\n\n  handleChangePage = (_event: React.MouseEvent<HTMLButtonElement> | null, page: number) => {\n    const { onPaginationSortUpdate, sort, pagination } = this.props;\n    if (!onPaginationSortUpdate || !pagination) return;\n\n    onPaginationSortUpdate({ ...pagination, page }, sort);\n  };\n\n  closeActionsMenu = () => this.setState({ actionsMenuAnchor: undefined, actionTarget: undefined });\n\n  renderCell(row: any, column: DVKColumn) {\n    const { classes } = this.props;\n\n    if (column.type === 'imageBase64') {\n      const imgData = deepGet(row, column.name);\n\n      return <TableCell key={ column.name } className={ clsx(classes.thumbnailWrapper, classes.thumbnailRowWrapper) }>\n        { imgData && <img\n          className={ classes.thumbnail }\n          src={ imgData }\n          alt={ `${ row.id }-${ column.name }` }\n        /> }\n      </TableCell>;\n    }\n\n    const value = deepGet(row, column.name);\n\n    return <TableCell key={ column.name } align={ column.type === 'number' ? 'right' : 'left' }>\n      { column.project ? column.project(value) : value }\n    </TableCell>;\n  }\n\n  renderActions(row: any) {\n    const { classes } = this.props;\n\n    return <TableCell className={ classes.actionsCol }>\n      <IconButton\n        className={ classes.actionsButton }\n        aria-controls=\"actions-menu\"\n        aria-haspopup=\"true\"\n        onClick={ (event) => {\n          event.stopPropagation();\n          this.setState({\n            actionsMenuAnchor: event.currentTarget,\n            actionTarget: row,\n          });\n        } }\n      >\n        <MenuIcon/>\n      </IconButton>\n    </TableCell>;\n  }\n\n  renderTable() {\n    const {\n      classes, className, rows, columns, onRowClick, actions,\n      pagination, sort, total,\n    } = this.props;\n    const emptyRows = (pagination && total && (pagination.rowsPerPage - Math.min(pagination.rowsPerPage, total - pagination.page * pagination.rowsPerPage))) || 0;\n\n    return (\n      <Table className={ className }>\n        <TableHead>\n          <TableRow>\n            { columns.map(column => <TableCell\n              key={ column.name }\n              align={ column.type === 'number' ? 'right' : 'left' }\n              sortDirection={ sort && sort.orderBy === column.name ? sort.order : false }>\n              { (sort !== undefined) && !column.noSort ? <Tooltip\n                  title=\"Sort\"\n                  placement={ column.type === 'number' ? 'bottom-end' : 'bottom-start' }\n                  enterDelay={ 300 }\n                >\n                  <TableSortLabel\n                    active={ (sort && sort.orderBy === column.name) || undefined }\n                    direction={ (sort && sort.order) || undefined }\n                    onClick={ this.createSortHandler(column.name) }\n                  >\n                    { column.label }\n                  </TableSortLabel>\n                </Tooltip>\n                : <>{ column.label }</> }\n            </TableCell>) }\n            { actions && <TableCell className={ classes.actionsCol }/> }\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          { rows.map(row => (\n            <TableRow\n              key={ row.id || row.syntheticId }\n              hover={ !!onRowClick }\n              style={ { cursor: onRowClick ? 'pointer' : 'inherit' } }\n              onClick={ () => onRowClick && onRowClick(row) }>\n\n              { columns.map(column => this.renderCell(row, column)) }\n\n              { actions && this.renderActions(row) }\n            </TableRow>\n          )) }\n          { emptyRows > 0 && (\n            <TableRow style={ { height: 48 * emptyRows } }>\n              <TableCell colSpan={ columns.length + (actions ? 1 : 0) }/>\n            </TableRow>\n          ) }\n        </TableBody>\n      </Table>\n    );\n  }\n\n  renderPagination() {\n    const { pagination, total, classes } = this.props;\n    if (!total || !pagination) return;\n    const { rowsPerPage, page } = pagination;\n\n    return (\n      <TablePagination\n        component=\"div\"\n        backIconButtonProps={ { 'aria-label': 'Previous Page' } }\n        nextIconButtonProps={ { 'aria-label': 'Next Page' } }\n\n        rowsPerPageOptions={ [rowsPerPage] }\n        count={ total }\n        rowsPerPage={ rowsPerPage }\n        page={ page! }\n\n        onChangePage={ this.handleChangePage }\n        classes={ { root: classes.pagination } }\n      />\n    );\n  }\n\n  render() {\n    const { actionsMenuAnchor, actionTarget } = this.state;\n    const { total, actions } = this.props;\n\n    return <>\n      { this.renderTable() }\n      { total && this.renderPagination() }\n      { actions && <Menu\n        id=\"actions-menu\"\n        anchorEl={ actionsMenuAnchor }\n        keepMounted\n        open={ !!actionsMenuAnchor }\n        onClose={ this.closeActionsMenu }\n      >\n        { actions.map(action => <MenuAction\n          { ...action }\n          key={ action.name } // this will fail if you have multiple dividers; will find solution when this is a problem\n          closeActionsMenu={ this.closeActionsMenu }\n          actionTarget={ actionTarget }\n        />) }\n      </Menu> }\n    </>;\n  }\n}\n\nexport default withStyles(styles)(DVKTable);\n","import DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CloneIcon from '@material-ui/icons/FileCopy';\nimport { ComponentType } from 'react';\n\nexport type DVKAction = {\n  name: string,\n  label?: string,\n  Icon?: ComponentType,\n  onClick?: DVKActionCB\n}\n\nexport type DVKActionCB = (obj: any) => void\n\nexport default function createDefaultActions({\n                                               onEdit = () => null,\n                                               onClone,\n                                               onDelete = () => null,\n                                             }: {\n  onEdit?: DVKActionCB,\n  onClone?: DVKActionCB,\n  onDelete?: DVKActionCB\n}): DVKAction[] {\n  return [\n    onEdit && { name: 'edit', label: 'View & Edit', Icon: EditIcon, onClick: onEdit },\n    onClone && { name: 'clone', label: 'Clone', Icon: CloneIcon, onClick: onClone },\n    { name: 'divider' },\n    onDelete && { name: 'delete', label: 'Delete', Icon: DeleteIcon, color: 'red', onClick: onDelete },\n  ]\n    .filter(it => !!it) as DVKAction[];\n}\n","import Slide from '@material-ui/core/Slide';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport React, { forwardRef } from 'react';\n\nexport const SlideUp = forwardRef(function SlideUp(\n  props: TransitionProps & { children?: React.ReactElement<any, any> },\n  ref: React.Ref<unknown>,\n) {\n  return <Slide direction=\"up\" ref={ ref } { ...props } />;\n});\n","import Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport React, { FC, ReactNode } from 'react';\n\nimport { SlideUp } from './common';\n\nexport type InfoModalProps = {\n  open: boolean,\n  onClose: () => void,\n  message?: ReactNode,\n  title: ReactNode\n}\n\nconst InfoModal: FC<InfoModalProps> = ({ open, message, title, onClose }) => {\n  return (\n    <Dialog\n      TransitionComponent={ SlideUp }\n      open={ open }\n      onClose={ onClose }\n      fullWidth\n      maxWidth=\"sm\"\n    >\n      <DialogTitle>{ title }</DialogTitle>\n      <DialogContent>\n        { message && typeof message === 'string'\n          ? <DialogContentText>{ message }</DialogContentText>\n          : message\n        }\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default InfoModal;\n","import React from 'react';\nimport { DVKObject, DVKValue } from './domain';\n\nconst FormContext = React.createContext({\n  obj: {},\n  updateProperty: () => undefined,\n  updatePropertyF: () => undefined,\n} as {\n  obj: DVKObject,\n  updateProperty: (property: string, type: string) => any,\n  updatePropertyF: (property: string, update: (value: DVKValue) => DVKValue) => any,\n});\n\nexport default FormContext;\n","import { Checkbox, FormControl, FormControlLabel, FormHelperText, FormLabel } from '@material-ui/core';\nimport React, { FunctionComponent, useContext } from 'react';\n\nimport { deepGet } from '../../../lib';\n\nimport FormContext from '../context';\nimport { DVKCheckboxField, PropsWithErrorManagement } from '../domain';\n\nconst InputCheckbox: FunctionComponent<DVKCheckboxField & PropsWithErrorManagement> = ({\n                                                                                         name,\n                                                                                         label,\n                                                                                         type,\n\n                                                                                         required = false,\n                                                                                         disabled = false,\n                                                                                         text = '',\n                                                                                         checkboxProps = {},\n\n                                                                                         hasError,\n                                                                                         message,\n                                                                                       }) => {\n  const { obj, updateProperty } = useContext(FormContext);\n\n  const useLabelAsText = !text;\n  const checkboxText = useLabelAsText ? label + (required ? ' *' : '') : text;\n\n  return (<>\n    <FormControl\n      margin=\"dense\"\n      fullWidth\n      required={ required }\n      error={ hasError }\n      component=\"fieldset\"\n    >\n      { (!useLabelAsText) && <FormLabel component=\"legend\">{ label }</FormLabel> }\n      <FormControlLabel\n        control={\n          <Checkbox\n            { ...checkboxProps }\n            checked={ !!deepGet(obj, name, false) }\n            onChange={ updateProperty(name, type) }\n            value={ true }\n          />\n        }\n        label={ checkboxText }\n        disabled={ disabled }\n      />\n      { message && <FormHelperText>{ message }</FormHelperText> }\n    </FormControl>\n  </>);\n};\n\nexport default InputCheckbox;\n","import CircularProgress from '@material-ui/core/CircularProgress';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\nimport React, { ChangeEvent, FunctionComponent, useContext, useEffect, useMemo, useState } from 'react';\n\nimport { debounce, deepGet, lett } from '../../../lib';\n\nimport FormContext from '../context';\nimport { DVKComboBoxField, DVKComboBoxFieldValue, PropsWithErrorManagement } from '../domain';\n\nfunction filterDuplicates(options: DVKComboBoxFieldValue[]): DVKComboBoxFieldValue[] {\n  const uniqueSet = new Set<string>();\n  return options.filter(option => {\n    const key = option.name || option;\n    if (uniqueSet.has(key)) return false;\n    return !!uniqueSet.add(key);\n  });\n}\n\nconst InputComboBox: FunctionComponent<DVKComboBoxField & PropsWithErrorManagement> = ({\n                                                                                         name,\n                                                                                         label,\n                                                                                         type,\n\n                                                                                         required = false,\n                                                                                         autoFocus = false,\n                                                                                         disabled = false,\n                                                                                         multiple = false,\n                                                                                         options: staticOptions,\n                                                                                         search,\n                                                                                         renderOption = opt => opt.label || opt,\n\n                                                                                         hasError,\n                                                                                         message,\n                                                                                       }) => {\n  const { obj, updateProperty } = useContext(FormContext);\n  const [ open, setOpen ] = useState(false);\n  const [ loading, setLoading ] = useState(false);\n  const [ inputValue, setInputValue ] = useState('');\n  const [ options, setOptions ] = useState<DVKComboBoxFieldValue[]>(staticOptions || []);\n  const debouncedSearch = useMemo(() => search && debounce((input, callback) => {\n    search(input).then(callback);\n  }, 200), [ search ]);\n\n  const getOptionSelected = (option: DVKComboBoxFieldValue, value: DVKComboBoxFieldValue) => option.name\n    ? option.name === value.name\n    : option === value;\n\n  const multipleValue = multiple\n    ? (lett(\n      deepGet(obj, name, []),\n      (names: string[]) => names.map(name => options.find(opt => opt.name === name || opt === name)),\n    ) || [])\n      .filter(value => options.some(opt => opt.name === value || opt === value))\n    : undefined;\n  const simpleValue = !multiple\n    ? (lett(\n      deepGet(obj, name, null),\n      name => options.find(opt => name === (opt.name || opt)),\n    ) || null)\n    : undefined;\n\n  useEffect(() => {\n    let active = true;\n\n    if (!debouncedSearch) {\n      return undefined;\n    }\n\n    setLoading(true);\n    debouncedSearch(inputValue, (results: DVKComboBoxFieldValue[]) => {\n      setLoading(false);\n      if (active) {\n        setOptions(multiple\n          ? (oldOptions) => filterDuplicates([\n            ...oldOptions.filter(option => !!multipleValue!.find(value => getOptionSelected(option, value))),\n            ...results,\n          ])\n          : results,\n        );\n      }\n    });\n\n    return () => {\n      active = false;\n    };\n  }, [ staticOptions, inputValue, debouncedSearch, setLoading ]);\n\n  return <FormControl\n    disabled={ disabled }\n    error={ hasError }\n    required={ required }\n    fullWidth\n    margin=\"dense\"\n  >\n    <Autocomplete\n      value={ multiple ? multipleValue : simpleValue }\n      onChange={ (_: ChangeEvent, newValue: DVKComboBoxFieldValue | null | DVKComboBoxFieldValue[]) => {\n        updateProperty(name, type)(\n          multiple ? newValue.map((value: DVKComboBoxFieldValue) => value.name || value) : newValue,\n        );\n      } }\n      open={ open }\n      multiple={ multiple }\n      disabled={ disabled }\n      onOpen={ () => setOpen(true) }\n      onClose={ () => {\n        setOpen(false);\n        setInputValue('');\n      } }\n      options={ options }\n      getOptionSelected={ getOptionSelected }\n      filterOptions={ search ? (options) => options : createFilterOptions() }\n      getOptionLabel={ (option) => option.label || option }\n      inputValue={ multiple ? inputValue : undefined }\n      renderOption={ renderOption }\n      renderInput={ params => <TextField\n        { ...params }\n        onChange={ (event) => setInputValue(event.target.value) }\n        name={ name }\n        label={ label + (required ? ' *' : '') }\n        margin=\"dense\"\n        fullWidth\n        autoFocus={ autoFocus }\n        error={ hasError }\n        helperText={ message }\n        InputProps={ {\n          ...params.InputProps,\n          endAdornment: (\n            <React.Fragment>\n              { search && loading && open ? <CircularProgress color=\"inherit\" size={ 20 }/> : null }\n              { params.InputProps.endAdornment }\n            </React.Fragment>\n          ),\n        } }\n      /> }\n    />\n  </FormControl>;\n};\n\nexport default InputComboBox;\n","import React, { FunctionComponent, useContext } from 'react';\nimport { DatePicker, DateTimePicker, TimePicker } from '@material-ui/pickers';\n\nimport { deepGet } from '../../../lib';\n\nimport FormContext from '../context';\nimport { DVKDateTimeField, PropsWithErrorManagement } from '../domain';\n\nconst InputDateTime: FunctionComponent<DVKDateTimeField & PropsWithErrorManagement> = ({\n                                                                                         name,\n                                                                                         label,\n                                                                                         type,\n\n                                                                                         required = false,\n                                                                                         disabled = false,\n\n                                                                                         hasError,\n                                                                                         message,\n                                                                                       }) => {\n  const { obj, updateProperty } = useContext(FormContext);\n\n  const commonProps = {\n    fullWidth: true,\n    autoOk: true,\n    margin: 'normal' as 'normal',\n    name: name,\n    label: label,\n    required: required,\n    disabled: disabled,\n    value: deepGet(obj, name, null),\n    onChange: updateProperty(name, type),\n    error: hasError,\n    helperText: message,\n  };\n\n  switch (type) {\n    case 'date-time':\n      return <DateTimePicker\n        ampm={ false }\n        { ...commonProps }\n      />;\n    case 'time':\n      return <TimePicker\n        ampm={ false }\n        { ...commonProps }\n      />;\n    case 'date':\n      return <DatePicker\n        { ...commonProps }\n      />;\n  }\n};\n\nexport default InputDateTime;\n","import TextField from '@material-ui/core/TextField';\nimport React, { FunctionComponent, useContext } from 'react';\n\nimport { deepGet } from '../../../lib';\n\nimport FormContext from '../context';\nimport { DVKDefaultField, PropsWithErrorManagement } from '../domain';\n\nconst InputDefault: FunctionComponent<DVKDefaultField & PropsWithErrorManagement> = ({\n                                                                                       name,\n                                                                                       label,\n                                                                                       type,\n\n                                                                                       required = false,\n                                                                                       autoFocus = false,\n                                                                                       disabled = false,\n                                                                                       multiline = false,\n                                                                                       autoComplete = name,\n\n                                                                                       hasError,\n                                                                                       message,\n                                                                                     }) => {\n  const { obj, updateProperty } = useContext(FormContext);\n\n  return (\n    <TextField\n      name={ name }\n      label={ label }\n      autoFocus={ autoFocus }\n      type={ type }\n      autoComplete={ autoComplete }\n      multiline={ multiline }\n      rows={ 4 }\n      rowsMax={ 10 }\n      required={ required }\n      disabled={ disabled }\n      margin=\"dense\"\n      fullWidth\n      value={ deepGet(obj, name, '') }\n      onChange={ updateProperty(name, type) }\n      error={ hasError }\n      helperText={ message }\n    />\n  );\n};\n\nexport default InputDefault;\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles(theme => ({\n  expansionPanelContent: {\n    overflow: 'hidden',\n  },\n  expansionPanelTable: {\n    marginLeft: theme.spacing(-3),\n    marginRight: theme.spacing(-3),\n  },\n  expansionPanelNoContent: {\n    marginLeft: theme.spacing(3),\n    marginRight: theme.spacing(3),\n  },\n  expansionPanelHeading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  expansionPanelButtonsWrapper: {\n    marginTop: theme.spacing(1),\n  },\n  iconLeft: {\n    marginRight: theme.spacing(1),\n  },\n  thumbnail: {\n    maxWidth: 75,\n    maxHeight: 75,\n    marginBottom: theme.spacing(.5),\n  },\n  thumbnailWrapper: {\n    maxHeight: 'initial',\n    height: 'initial',\n  },\n}));\n","import Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport IconButton from '@material-ui/core/IconButton';\nimport Input from '@material-ui/core/Input';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React, { ChangeEvent, FC, useContext, useState, useRef } from 'react';\n\nimport { deepGet } from '../../../lib';\n\nimport FormContext from '../context';\nimport { DVKFileField, PropsWithErrorManagement } from '../domain';\nimport useStyles from '../styles';\n\nconst InputFile: FC<DVKFileField & PropsWithErrorManagement> = ({\n                                                                  name, label, type,\n\n                                                                  required = false,\n                                                                  disabled = false,\n                                                                  acceptedFileType,\n                                                                  multiple,\n                                                                  hasError,\n                                                                  message,\n                                                                }) => {\n  const { obj, updateProperty } = useContext(FormContext);\n  const classes = useStyles();\n  const [ selectedFileName, setSelectedFileName ] = useState(deepGet(obj, `${ name }.fileName`, ''));\n\n  const inputRef = useRef(null);\n  function onFileSelected({ target: { files } }: ChangeEvent<HTMLInputElement>) {\n    if (!files) return;\n    const listFiles = Array.from(files);\n    let fileName = listFiles.map((file) => file.name).join();\n    setSelectedFileName(fileName);\n    updateProperty(name, type)(listFiles);\n  }\n\n  function clearField(e: React.MouseEvent<HTMLButtonElement>) {\n    if (null !== inputRef.current) {\n      (inputRef.current as any).value = ''  // TS is stupid and keeps saying the \n    }\n    e.stopPropagation();\n    e.preventDefault();\n    setSelectedFileName('');\n    updateProperty(name, type)(null);\n  }\n\n  return <>\n    <input\n      accept={ acceptedFileType }\n      style={ { display: 'none' } }\n      id={ `${ name }-hidden` }\n      type=\"file\"\n      onChange={ onFileSelected }\n      multiple={ multiple }\n      ref={inputRef}\n    />\n    <label htmlFor={ `${ name }-hidden` }>\n      <FormControl fullWidth margin=\"dense\">\n        <InputLabel htmlFor={ name } error={ hasError }>{ label + (required ? ' *' : '') }</InputLabel>\n        <Input\n          id={ name }\n          type=\"text\"\n          disabled={ disabled }\n          required={ required }\n\n          value={ selectedFileName }\n\n          endAdornment={ <InputAdornment position=\"end\">\n            <Button component=\"span\">\n              <AttachFileIcon className={ classes.iconLeft }/>\n              Attach\n            </Button>\n            { selectedFileName && <IconButton aria-label=\"Remove selected files\" onClick={ clearField }>\n              <DeleteIcon/>\n            </IconButton> }\n          </InputAdornment> }\n          inputProps={ {\n            disabled: true,\n          } }\n\n          error={ hasError }\n          aria-describedby={ `${ name }-helper` }\n        />\n        { hasError && <FormHelperText id={ `${ name }-helper` } error>{ message }</FormHelperText> }\n      </FormControl>\n    </label>\n  </>;\n};\n\nexport default InputFile;\n","import TextField from '@material-ui/core/TextField';\nimport React, { FunctionComponent, useContext } from 'react';\n\nimport { deepGet } from '../../../lib';\n\nimport FormContext from '../context';\nimport { DVKHiddenField } from '../domain';\n\nconst InputHidden: FunctionComponent<DVKHiddenField> = ({ name, type }) => {\n  const { obj } = useContext(FormContext);\n\n  return (\n    <TextField\n      name={ name }\n      type={ type }\n      disabled\n      hidden\n      value={ deepGet(obj, name, '') }\n    />\n  );\n};\n\nexport default InputHidden;\n","import Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport IconButton from '@material-ui/core/IconButton';\nimport Input from '@material-ui/core/Input';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport DefaultThumbnail from '@material-ui/icons/AddPhotoAlternate';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport BrowseImage from '@material-ui/icons/ImageSearch';\nimport React, { ChangeEvent, FC, useContext, useEffect, useMemo, useState } from 'react';\n\nimport { deepGet } from '../../../lib';\n\nimport FormContext from '../context';\nimport { DVKImageField, PropsWithErrorManagement } from '../domain';\nimport useStyles from '../styles';\n\nconst InputImage: FC<DVKImageField & PropsWithErrorManagement> = ({\n                                                                    name, label, type,\n\n                                                                    autoFocus = false,\n                                                                    required = false,\n                                                                    disabled = false,\n\n                                                                    hasError,\n                                                                    message,\n                                                                  }) => {\n  const { obj, updateProperty } = useContext(FormContext);\n  const classes = useStyles();\n  const [ selectedFileName, setSelectedFileName ] = useState(deepGet(obj, `${ name }.fileName`, ''));\n  const [ thumbnail, setThumbnail ] = useState(deepGet(obj, `${ name }.thumbnail`, undefined));\n  const fileReader = useMemo(() => new FileReader(), []);\n\n  useEffect(() => {\n    fileReader.onload = function () {\n      setThumbnail(fileReader.result);\n    };\n  }, [ fileReader ]);\n\n  function onFileSelected({ target: { files } }: ChangeEvent<HTMLInputElement>) {\n    if (!files || !files[0]) return;\n    const file = files[0];\n\n    setSelectedFileName(file.name);\n    fileReader.readAsDataURL(file);\n    updateProperty(name, type)(file);\n  }\n\n  function clearField(e: React.MouseEvent<HTMLButtonElement>) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    setSelectedFileName('');\n    setThumbnail(undefined);\n    updateProperty(name, type)(null);\n  }\n\n  return <>\n    <input\n      accept=\"image/*\"\n      style={ { display: 'none' } }\n      id={ `${ name }-hidden` }\n      type=\"file\"\n      onChange={ onFileSelected }\n    />\n    <label htmlFor={ `${ name }-hidden` }>\n      <FormControl fullWidth margin=\"dense\">\n        <InputLabel htmlFor={ name } error={ hasError }>{ label + (required ? ' *' : '') }</InputLabel>\n        <Input\n          id={ name }\n          type=\"text\"\n          disabled={ disabled }\n          autoFocus={ autoFocus }\n          required={ required }\n\n          value={ selectedFileName }\n\n          startAdornment={ <InputAdornment position=\"start\" className={ classes.thumbnailWrapper }>\n            { thumbnail\n              ? <img src={ thumbnail } alt={ `${ name }-thumbnail` } className={ classes.thumbnail }/>\n              : <DefaultThumbnail fontSize=\"large\"/>\n            }\n          </InputAdornment> }\n          endAdornment={ <InputAdornment position=\"end\">\n            <Button component=\"span\">\n              <BrowseImage className={ classes.iconLeft }/>\n              Browse\n            </Button>\n            { selectedFileName && <IconButton aria-label=\"Remove selected image\" onClick={ clearField }>\n              <DeleteIcon/>\n            </IconButton> }\n          </InputAdornment> }\n          inputProps={ {\n            disabled: true,\n          } }\n\n          error={ hasError }\n          aria-describedby={ `${ name }-helper` }\n        />\n        { hasError && <FormHelperText id={ `${ name }-helper` } error>{ message }</FormHelperText> }\n      </FormControl>\n    </label>\n  </>;\n};\n\nexport default InputImage;\n","import Button from '@material-ui/core/Button';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport React, { FC, Fragment } from 'react';\n\nimport { SlideUp } from './common';\n\nexport type ConfirmationModalProps = {\n  open: boolean,\n  message: string,\n  title: string,\n  onCancel: () => void,\n  onAccept: () => void\n}\n\nconst ConfirmationModal: FC<ConfirmationModalProps> = ({ open, message, title, onCancel, onAccept, children }) => {\n  const renderActions = () => <Fragment>\n    <Button onClick={ onCancel }>\n      Cancel\n    </Button>\n    <Button onClick={ onAccept }>\n      Ok\n    </Button>\n  </Fragment>;\n\n  return (\n    <Dialog\n      aria-labelledby=\"confirmation-dialog-title\"\n      TransitionComponent={ SlideUp }\n      open={ open }\n      onClose={ onCancel }\n      fullWidth\n      maxWidth=\"sm\"\n      aria-describedby=\"confirmation-dialog-description\"\n    >\n      <DialogTitle id=\"confirmation-dialog-title\">{ title }</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"confirmation-dialog-description\">{ message }</DialogContentText>\n        { children }\n      </DialogContent>\n      <DialogActions>{ renderActions() }</DialogActions>\n    </Dialog>\n  );\n};\n\nexport default ConfirmationModal;\n","import React from 'react';\n\nexport function FlexExpander() {\n  return <div style={ { flex: 1 } }/>;\n}\n","import { AccordionProps } from '@material-ui/core';\nimport { CheckboxProps } from '@material-ui/core/Checkbox';\nimport { ReactNode } from 'react';\n\nexport type DVKValue = string\n  | number\n  | string[]\n  | DVKObject\n  | DVKListItem[]\n  | File\n\nexport type DVKObject = {\n  [key: string]: DVKValue\n}\n\nexport type DVKListItem = {\n  id: any,\n  syntheticId: string,\n}\n\nexport type DVKInvalidFields = {\n  [key: string]: boolean | string\n}\n\ntype BasicField<TType> = {\n  name: string, type: TType,\n}\n\ntype LabeledField<TType> = BasicField<TType> & {\n  label: string\n}\n\nexport type FieldWithErrorManagement = {\n  errorMessage?: string | { [key: string]: string },\n}\n\nexport type PropsWithErrorManagement = {\n  hasError: boolean,\n  message: string | undefined,\n}\n\nexport type DVKFieldMashed = DVKField\n  & DVKDateTimeField\n  & DVKListField\n  & DVKSelectField\n  & DVKDefaultField\n  & DVKImageField\n  & DVKFileField\n  & DVKCheckboxField\n  & DVKHiddenField\n  & DVKComboBoxField\n\nexport type DVKFieldType = DVKDateTimeType\n  | DVKListType\n  | DVKSelectType\n  | DVKDefaultType\n  | DVKImageType\n  | DVKFileType\n  | DVKCheckboxType\n  | DVKHiddenType\n  | DVKComboBoxType\n\nexport type DVKField = (\n  DVKDateTimeField\n  | DVKListField\n  | DVKSelectField\n  | DVKDefaultField\n  | DVKImageField\n  | DVKFileField\n  | DVKCheckboxField\n  | DVKHiddenField\n  | DVKComboBoxField\n  ) & {\n  infoModal?: { title: string, message: string, buttonProps?: any },\n}\n\nexport function isHiddenField(field: DVKField): field is DVKHiddenField {\n  return field.type === 'hidden';\n}\n\nexport type DVKDateTimeType = 'date' | 'time' | 'date-time';\nexport type DVKDateTimeField = LabeledField<DVKDateTimeType> & FieldWithErrorManagement & {\n  required?: boolean,\n  disabled?: boolean,\n}\n\nexport type DVKListType = 'list';\nexport type DVKListField = LabeledField<DVKListType> & {\n  fields: DVKField[],\n  newLabel?: string,\n  editLabel?: (value: DVKListItem) => string,\n  deleteLabel?: (value: DVKListItem) => string,\n  deleteMessage?: (value: DVKListItem) => string,\n  accordionProps?: Omit<AccordionProps, 'children'>\n}\n\nexport type DVKSelectFieldValue = string | {\n  name: string,\n  label: string,\n}\nexport type DVKSelectType = 'select';\nexport type DVKSelectField = LabeledField<DVKSelectType> & FieldWithErrorManagement & {\n  required?: boolean,\n  autoFocus?: boolean,\n  disabled?: boolean,\n  values: DVKSelectFieldValue[],\n}\n\nexport type DVKDefaultType = 'text' | 'email' | 'password' | 'number';\nexport type DVKDefaultField = LabeledField<DVKDefaultType> & FieldWithErrorManagement & {\n  required?: boolean,\n  autoFocus?: boolean,\n  disabled?: boolean,\n  autoComplete?: string,\n  multiline?: boolean,\n}\n\nexport type DVKImageType = 'image';\nexport type DVKImageField = LabeledField<DVKImageType> & FieldWithErrorManagement & {\n  required?: boolean,\n  autoFocus?: boolean,\n  disabled?: boolean,\n}\n\nexport type DVKFileType = 'file';\nexport type DVKFileField = LabeledField<DVKFileType> & FieldWithErrorManagement & {\n  required?: boolean,\n  disabled?: boolean,\n  acceptedFileType?: string,\n  multiple?: boolean,\n}\nexport type DVKCheckboxType = 'checkbox';\nexport type DVKCheckboxField = LabeledField<DVKCheckboxType> & FieldWithErrorManagement & {\n  text?: string,\n  required?: boolean,\n  disabled?: boolean,\n  checkboxProps?: CheckboxProps,\n}\n\nexport type DVKHiddenType = 'hidden';\nexport type DVKHiddenField = BasicField<DVKHiddenType>;\n\nexport type DVKComboBoxFieldValue = string | {\n  name: string,\n  label: string,\n} & any\nexport type DVKComboBoxType = 'combo-box';\nexport type DVKComboBoxField<T extends DVKComboBoxFieldValue = any> =\n  LabeledField<DVKComboBoxType>\n  & FieldWithErrorManagement\n  & {\n  required?: boolean,\n  autoFocus?: boolean,\n  disabled?: boolean,\n  multiple?: boolean,\n  search?: (search: string) => Promise<T[]>,\n  options?: T[],\n  renderOption?: (value: T) => ReactNode,\n}\n","import Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport React, { ComponentType, FunctionComponent, useContext, useMemo } from 'react';\n\nimport { deepGet, useIncrementalKey, useModal, uuid } from '../../../lib';\nimport ConfirmationModal from '../../Modals/ConfirmationModal';\nimport { InputModalProps } from '../../Modals/InputModal';\nimport { FlexExpander } from '../../placeholders';\nimport DVKTable from '../../Table';\nimport createDefaultActions from '../../Table/defaultActions';\nimport { DVKColumn } from '../../Table/domain';\n\nimport FormContext from '../context';\nimport { DVKListField, DVKListItem, isHiddenField } from '../domain';\nimport useStyles from '../styles';\n\ntype InputListProps = DVKListField & {\n  InputModal: ComponentType<InputModalProps>, // any because we cannot import InputModal directly\n}\n\nconst InputList: FunctionComponent<InputListProps> = ({\n                                                        name,\n                                                        label,\n\n                                                        newLabel = `Add new ${ name }`,\n                                                        editLabel = ({ id }) => `Edit '${ id }'`,\n                                                        deleteLabel = ({ id }) => `Delete '${ id }'`,\n                                                        deleteMessage = () => '',\n                                                        fields,\n                                                        accordionProps = {},\n\n                                                        InputModal,\n                                                      }) => {\n  const { obj, updatePropertyF } = useContext(FormContext);\n  const classes = useStyles();\n  const { isOpen: isAddModalOpen, open: openAddModal, close: closeAddModal } = useModal();\n  const { isOpen: isEditModalOpen, data: editModalData = {}, open: openEditModal, close: closeEditModal } = useModal<any>();\n  const { isOpen: isDeleteModalOpen, data: deleteModalData = {}, open: openDeleteModal, close: closeDeleteModal } = useModal<any>();\n  const [ createKey, incrementCreateKey ] = useIncrementalKey();\n\n  const values = useMemo(() => deepGet(obj, name, []), [ obj, name ]);\n  const actions = useMemo(() => createDefaultActions({\n    onEdit: openEditModal,\n    onDelete: openDeleteModal,\n  }), [ openEditModal, openDeleteModal ]);\n\n  function isEqual(val1: DVKListItem, val2: DVKListItem) {\n    return (val1.id && val1.id === val2.id) || (val1.syntheticId && val1.syntheticId === val2.syntheticId);\n  }\n\n  return <Accordion defaultExpanded { ...accordionProps }>\n    <AccordionSummary\n      expandIcon={ <ExpandMoreIcon/> }\n      aria-controls={ `${ name }-content` }\n      id={ `${ name }-header` }\n    >\n      <Typography className={ classes.expansionPanelHeading }>{ label }</Typography>\n    </AccordionSummary>\n    <AccordionDetails className={ classes.expansionPanelContent }>\n      <Grid container direction=\"column\">\n        <Grid item className={ classes.expansionPanelTable }>\n          { values.length\n            ? <DVKTable\n              // cast is safe because we checked it before\n              columns={ fields.filter(field => !isHiddenField(field)) as DVKColumn[] }\n              actions={ actions }\n              rows={ values }\n              onRowClick={ openEditModal }\n            />\n            : <Typography key={ name } className={ classes.expansionPanelNoContent }>\n              No { label.toLowerCase() }. Please add some.\n            </Typography>\n          }\n        </Grid>\n        <Grid item container className={ classes.expansionPanelButtonsWrapper }>\n          <FlexExpander/>\n          <Button onClick={ openAddModal }>\n            Add\n          </Button>\n        </Grid>\n      </Grid>\n    </AccordionDetails>\n    <InputModal\n      title={ newLabel }\n      formKey={ `${ createKey }` }\n      open={ isAddModalOpen }\n      fields={ fields }\n      onClose={ closeAddModal }\n      onCreate={ (newValue: DVKListItem) => {\n        updatePropertyF(name, (oldValues = []) => [\n          ...(oldValues as DVKListItem[]),\n          { ...newValue, syntheticId: uuid() },\n        ]);\n        incrementCreateKey();\n      } }\n    />\n    <InputModal\n      title={ editLabel(editModalData) }\n      formKey={ editModalData.id || editModalData.syntheticId }\n      open={ isEditModalOpen }\n      fields={ fields }\n      defaultValue={ editModalData }\n      saveLabel=\"Save\"\n      onClose={ closeEditModal }\n      onCreate={ (newValue: DVKListItem) => {\n        updatePropertyF(name, (oldValues) => (oldValues as DVKListItem[])\n          .map(value => isEqual(value, newValue) ? newValue : value),\n        );\n        closeEditModal();\n      } }\n    />\n    <ConfirmationModal\n      title={ deleteLabel(deleteModalData) }\n      message={ deleteMessage(deleteModalData) }\n      open={ isDeleteModalOpen }\n      onCancel={ closeDeleteModal }\n      onAccept={ () => {\n        updatePropertyF(name, (oldValues) => (oldValues as DVKListItem[])\n          .filter(value => !isEqual(value, deleteModalData)),\n        );\n        closeDeleteModal();\n      } }\n    />\n  </Accordion>;\n};\n\nexport default InputList;\n","import FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport React, { FunctionComponent, useContext } from 'react';\n\nimport { deepGet } from '../../../lib';\n\nimport FormContext from '../context';\nimport { DVKSelectField, PropsWithErrorManagement } from '../domain';\n\nconst InputSelect: FunctionComponent<DVKSelectField & PropsWithErrorManagement> = ({\n                                                                                     name,\n                                                                                     label,\n                                                                                     type,\n\n                                                                                     values,\n                                                                                     required = false,\n                                                                                     autoFocus = false,\n                                                                                     disabled = false,\n\n                                                                                     hasError,\n                                                                                     message,\n                                                                                   }) => {\n  const { obj, updateProperty } = useContext(FormContext);\n\n  return <FormControl\n    disabled={ disabled }\n    error={ hasError }\n    required={ required }\n    fullWidth\n    margin=\"dense\"\n  >\n    <InputLabel htmlFor={ name }>{ label }</InputLabel>\n    <Select\n      value={ deepGet(obj, name, '') }\n      onChange={ updateProperty(name, type) }\n      inputProps={ {\n        name,\n        id: name,\n        autoFocus,\n      } }\n    >\n      { !required && <MenuItem value={ '' }>\n        <em>None</em>\n      </MenuItem> }\n      { values.map((value) => {\n        if (typeof value === 'string') return <MenuItem key={ value } value={ value }>{ value }</MenuItem>;\n        return <MenuItem key={ value.name } value={ value.name }>{ value.label }</MenuItem>;\n      }) }\n    </Select>\n\n    { message && <FormHelperText>{ message }</FormHelperText> }\n  </FormControl>;\n};\n\nexport default InputSelect;\n","import { Box, IconButton } from '@material-ui/core';\nimport InfoIcon from '@material-ui/icons/Info';\nimport React, {\n  ComponentType,\n  Fragment,\n  FunctionComponent,\n  ReactElement,\n  ReactNode,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\n\nimport { deepGet, deepSet, useModal, uuid } from '../../lib';\nimport InfoModal from '../Modals/InfoModal';\nimport { InputModalProps } from '../Modals/InputModal';\n\nimport FormContext from './context';\nimport { DVKField, DVKFieldMashed, DVKInvalidFields, DVKObject, DVKValue, FieldWithErrorManagement } from './domain';\nimport InputCheckbox from './input/Checkbox';\nimport InputComboBox from './input/ComboBox';\nimport InputDateTime from './input/DateTime';\nimport InputDefault from './input/Default';\nimport InputFile from './input/File';\nimport InputHidden from './input/Hidden';\nimport InputImage from './input/Image';\nimport InputList from './input/List';\nimport InputSelect from './input/Select';\n\n\nexport type DVKFormProps = {\n  className?: string,\n\n  bottomContent?: ReactNode,\n  defaultValue?: DVKObject,\n  fields: DVKField[],\n  ContentWrapper?: ComponentType,\n  ActionsWrapper?: ComponentType,\n  renderActions?: (formId: string) => ReactElement | null,\n  onSubmit?: (obj: DVKObject) => void,\n  onChange?: (obj: DVKObject) => void,\n  invalidFields?: DVKInvalidFields | null | undefined,\n  InputModal?: ComponentType<InputModalProps>,\n};\n\nfunction convertValue(value: DVKValue, type: string): any {\n  switch (type) {\n    case 'number':\n      return value === '' ? '' : +(value || 0);\n    default:\n      return value;\n  }\n}\n\nfunction strip(value: any) {\n  const newObj = { ...value };\n  delete newObj.__typename;\n  delete newObj.syntheticId;\n  return newObj;\n}\n\nfunction needsStripping(value: any): boolean {\n  return value.syntheticId || value.__typename;\n}\n\n// TODO deep check\nfunction stripSyntheticIds(obj: DVKObject): DVKObject {\n  return Object.keys(obj).reduce((acc, key) => ({\n    ...acc,\n    [key]: Array.isArray(obj[key])\n      ? (obj[key] as DVKValue[]).map(value => needsStripping(value) ? strip(value) : value)\n      : obj[key],\n  }), {});\n}\n\n// these values are used for change detection\nconst defaultProps = { defaultValue: {} };\n\nconst DVKForm: FunctionComponent<DVKFormProps> = ({\n                                                    className,\n                                                    children,\n                                                    bottomContent,\n\n                                                    defaultValue = defaultProps.defaultValue,\n                                                    fields,\n\n                                                    ContentWrapper = Fragment,\n                                                    ActionsWrapper = Fragment,\n                                                    renderActions = null,\n\n                                                    onSubmit = () => null,\n                                                    onChange = () => null,\n\n                                                    invalidFields = null,\n\n                                                    InputModal = Fragment, // hack to avoid circular dependencies; better solutions are welcome\n                                                  }) => {\n  const [ obj, setObj ] = useState({ ...defaultValue });\n  const [ innerInvalidFields, setInnerInvalidFields ] = useState<DVKInvalidFields | null>(null);\n  const formId = useMemo(() => {\n    setObj({ ...defaultValue });\n    return uuid();\n  }, [ defaultValue ]);\n\n  const { isOpen: isInfoModalOpen, data: infoModalData, open: openInfoModal, close: closeInfoModal } = useModal();\n\n  useEffect(() => {\n    onChange(obj);\n  }, [ obj, onChange ]);\n\n  function handleSubmit(event: React.MouseEvent<HTMLFormElement>) {\n    event.preventDefault();\n    event.stopPropagation();\n    const requiredFields = fields.filter(it => (it as any).required);\n\n    const requiredErrors: [ string, DVKValue ][] = requiredFields\n      .map(it => [ it.name, deepGet(obj, it.name) ] as [ string, DVKValue ])\n      .filter(([ , value ]) => value === null\n        || value === undefined\n        || (value as Array<any>).length === 0,\n      );\n\n    if (requiredErrors.length) {\n      setInnerInvalidFields(requiredErrors.reduce((acc, it) => ({ ...acc, [it[0]]: 'required' }), {}));\n    } else {\n      setInnerInvalidFields(null);\n      onSubmit(stripSyntheticIds(obj));\n    }\n  }\n\n  const updateProperty = (property: string, type: string) => (event: any) => {\n    let value: any;\n    switch (type) {\n      case 'date':\n      case 'time':\n      case 'date-time':\n      case 'image':\n      case 'file':\n        value = event;\n        break;\n      case 'combo-box':\n        value = event ? event.name || event : null;\n        break;\n      case 'checkbox':\n        value = event.target.checked;\n        break;\n      default :\n        value = event.target.value;\n    }\n\n    setObj((oldObj) => {\n      const newObject = { ...oldObj };\n      deepSet(newObject, property, convertValue(value, type));\n      return newObject;\n    });\n\n    if (innerInvalidFields && innerInvalidFields[property]) {\n      setInnerInvalidFields(oldInvalidFields => ({ ...oldInvalidFields, [property]: false }));\n    }\n  };\n\n  const updatePropertyF = (property: string, update: (value: DVKValue) => DVKValue) => {\n    setObj((oldObj: DVKObject) => {\n      const newObject = { ...oldObj };\n      deepSet(newObject, property, update(deepGet(oldObj, property)));\n      return newObject;\n    });\n\n    if (innerInvalidFields && innerInvalidFields[property]) {\n      setInnerInvalidFields(oldInvalidFields => ({ ...oldInvalidFields, [property]: false }));\n    }\n  };\n\n  function getErrorMessage(errorMessageCode: string | any, errorMessage: FieldWithErrorManagement['errorMessage']) {\n    if (!errorMessageCode) return;\n    if (errorMessageCode === 'required' && !(errorMessage && errorMessage['required'])) {\n      return 'Please fill out this field';\n    }\n\n    if (typeof errorMessage === 'string') return errorMessage;\n    const code = typeof errorMessageCode === 'string' ? errorMessageCode : 'default';\n\n    if (!errorMessage && typeof errorMessageCode !== 'string') return 'Invalid value';\n    if (!errorMessage) return code;\n\n    return errorMessage[code];\n  }\n\n  function renderInputField({\n                              name, label, type,\n\n                              errorMessage,\n\n                              // default\n                              required, autoFocus, disabled, multiline, autoComplete,\n\n                              //file\n                              acceptedFileType, multiple,\n\n                              // select\n                              values,\n\n                              // list\n                              fields, newLabel, editLabel, deleteLabel, deleteMessage, accordionProps,\n\n                              // checkbox\n                              text, checkboxProps,\n\n                              // combo-box\n                              options, renderOption, search,\n                            }: DVKFieldMashed): ReactNode {\n    const errorMessageCode = (innerInvalidFields && innerInvalidFields[name]) || (invalidFields && invalidFields[name]);\n    const message = getErrorMessage(errorMessageCode, errorMessage);\n\n    const commonProps = {\n      key: name, name, label, type,\n    };\n\n    const errorProps = {\n      hasError: !!errorMessageCode, message,\n    };\n\n    switch (type) {\n      case 'list':\n        return <InputList\n          { ...commonProps }\n\n          fields={ fields }\n          newLabel={ newLabel }\n          editLabel={ editLabel }\n          deleteLabel={ deleteLabel }\n          deleteMessage={ deleteMessage }\n          accordionProps={ accordionProps }\n\n          InputModal={ InputModal }\n        />;\n      case 'select':\n        return <InputSelect\n          { ...commonProps }\n\n          values={ values }\n          required={ required }\n          autoFocus={ autoFocus }\n          disabled={ disabled }\n\n          { ...errorProps }\n        />;\n      case 'date':\n      case 'time':\n      case 'date-time':\n        return <InputDateTime\n          { ...commonProps }\n\n          required={ required }\n          disabled={ disabled }\n\n          { ...errorProps }\n        />;\n      case 'image':\n        return <InputImage\n          { ...commonProps }\n\n          required={ required }\n          disabled={ disabled }\n          autoFocus={ autoFocus }\n\n          { ...errorProps }\n        />;\n      case 'file':\n        return <InputFile\n          { ...commonProps }\n\n          required={ required }\n          disabled={ disabled }\n          acceptedFileType={ acceptedFileType }\n          multiple={ multiple }\n          { ...errorProps }\n        />;\n      case 'checkbox':\n        return <InputCheckbox\n          { ...commonProps }\n\n          required={ required }\n          disabled={ disabled }\n          text={ text }\n          checkboxProps={ checkboxProps }\n\n          { ...errorProps }\n        />;\n      case 'hidden':\n        return <InputHidden { ...commonProps }/>;\n      case 'combo-box':\n        return <InputComboBox\n          { ...commonProps }\n\n          multiple={ multiple }\n          required={ required }\n          autoFocus={ autoFocus }\n          disabled={ disabled }\n          options={ options }\n          renderOption={ renderOption }\n          search={ search }\n\n          { ...errorProps }\n        />;\n      default:\n        return <InputDefault\n          { ...commonProps }\n\n          autoFocus={ autoFocus }\n          autoComplete={ autoComplete }\n          multiline={ multiline }\n          required={ required }\n          disabled={ disabled }\n\n          { ...errorProps }\n        />;\n    }\n  }\n\n  function renderInputBox(field: DVKField): ReactNode {\n    return <Box key={ field.name } display=\"flex\" style={ field.type === 'hidden' ? { display: 'none' } : {} }>\n      <Box flexGrow={ 1 }>\n        { renderInputField(field as DVKFieldMashed) }\n      </Box>\n\n      { field.infoModal &&\n      <Box display=\"flex\" justifyContent=\"center\" flexDirection=\"column\">\n        <IconButton size='medium'\n                    { ...(field.infoModal.buttonProps || {}) }\n                    onClick={ () => openInfoModal({\n                      message: field.infoModal!.message,\n                      title: field.infoModal!.title,\n                    }) }\n        >\n          <InfoIcon/>\n        </IconButton>\n      </Box> }\n    </Box>;\n  }\n\n  return (\n    <form key={ formId } id={ formId } className={ className } onSubmit={ handleSubmit }>\n      <ContentWrapper>\n        <FormContext.Provider value={ {\n          obj,\n          updateProperty,\n          updatePropertyF,\n        } }>\n          { children }\n          { fields\n            .map((field) => renderInputBox(field))\n            .reduce((acc: ReactNode[], it: ReactNode) => acc.concat(it), [])\n          }\n          { bottomContent }\n          <InfoModal\n            onClose={ closeInfoModal }\n            open={ isInfoModalOpen }\n            message={ (infoModalData && infoModalData.message) || '' }\n            title={ (infoModalData && infoModalData.title) || '' }\n          />\n        </FormContext.Provider>\n      </ContentWrapper>\n\n      <ActionsWrapper>{ renderActions && typeof renderActions === 'function' && renderActions(formId) }</ActionsWrapper>\n\n      {/* hack to submit on enter */ }\n      <button type=\"submit\" style={ { display: 'none' } } form={ formId }/>\n    </form>\n  );\n};\n\nexport default DVKForm;\n","import { Fab, makeStyles } from '@material-ui/core';\nimport { FabProps } from '@material-ui/core/Fab';\nimport clsx from 'clsx';\nimport React, { FC } from 'react';\n\nconst useStyles = makeStyles({\n  fixed: {\n    position: 'fixed',\n    right: '10px',\n    bottom: '10px',\n  },\n}, { name: 'fab' });\n\nconst FloatingButton: FC<FabProps> = (({\n                                         onClick,\n                                         children,\n                                         className,\n                                         ...props\n                                       }) => {\n  const { fixed } = useStyles();\n  return (\n    <Fab { ...props } onClick={ onClick } className={ clsx(className, fixed) }>\n      { children }\n    </Fab>\n  );\n});\n\nexport default FloatingButton;\n","import Button from '@material-ui/core/Button';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport React, { FC, ReactElement, ReactNode, useCallback } from 'react';\n\nimport DVKForm from '../Form';\nimport { DVKField, DVKObject } from '../Form/domain';\nimport { FlexExpander } from '../placeholders';\n\nimport { SlideUp } from './common';\n\nexport type InputModalProps = {\n  open: boolean,\n  title: string,\n  formKey?: string,\n  saveLabel?: string,\n\n  onClose: () => void,\n  onCreate?: (obj: DVKObject) => void,\n  onChange?: (obj: DVKObject) => void,\n\n  fields: DVKField[],\n  defaultValue?: DVKObject,\n  invalidFields?: { [key: string]: boolean | string },\n\n  renderActions?: (formId: string) => ReactElement | null,\n  bottomContent?: ReactNode,\n};\n\n// these values are used for change detection\nconst defaultProps = { defaultValue: {}, formKey: 'staticKey' };\n\nconst InputModal: FC<InputModalProps> = ({\n                                           open,\n                                           onClose,\n                                           onCreate = () => null,\n                                           onChange = () => null,\n                                           title,\n                                           fields,\n                                           defaultValue = defaultProps.defaultValue,\n                                           formKey = defaultProps.formKey,\n                                           children,\n                                           invalidFields = {},\n                                           saveLabel = 'Create',\n                                           renderActions = null,\n                                           bottomContent,\n                                         }) => {\n  const actualRenderActions = useCallback((formId: string) => {\n    if (renderActions) return renderActions(formId);\n    return <>\n      <Button onClick={ onClose }>\n        Cancel\n      </Button>\n      <FlexExpander/>\n      <Button color=\"primary\" type=\"submit\" form={ formId }>\n        { saveLabel }\n      </Button>\n    </>;\n  }, [ onClose, saveLabel, renderActions ]);\n\n  return (\n    <Dialog\n      aria-labelledby=\"input-dialog-title\"\n      TransitionComponent={ SlideUp }\n      open={ open }\n      onClose={ onClose }\n      fullWidth\n      maxWidth=\"sm\"\n    >\n      <DialogTitle id=\"input-dialog-title\">{ title }</DialogTitle>\n      <DVKForm\n        key={ formKey }\n        fields={ fields }\n        defaultValue={ defaultValue }\n        ContentWrapper={ DialogContent }\n        ActionsWrapper={ DialogActions }\n        renderActions={ actualRenderActions }\n        onSubmit={ onCreate }\n        onChange={ onChange }\n        invalidFields={ invalidFields }\n        bottomContent={ bottomContent }\n        InputModal={ InputModal }\n      >{ children }</DVKForm>\n    </Dialog>\n  );\n};\n\nexport default InputModal;\n","import Button from '@material-ui/core/Button';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport React, { FC, ReactNode, useState } from 'react';\n\nimport { SlideUp } from './common';\n\nexport type ErrorModalProps = {\n  message?: ReactNode,\n  error: any,\n}\n\nconst ErrorModal: FC<ErrorModalProps> = ({\n                                           message = 'There was an error. Please check your input and try again.',\n                                           error,\n                                         }) => {\n  const [ open, setOpen ] = useState(true);\n\n  function renderActions() {\n    return <>\n      <Button onClick={ () => setOpen(false) }>\n        Ok\n      </Button>\n    </>;\n  }\n\n  return (\n    error && <Dialog\n      aria-labelledby=\"error-dialog-title\"\n      TransitionComponent={ SlideUp }\n      open={ open }\n      onClose={ () => setOpen(false) }\n      fullWidth\n      maxWidth=\"sm\"\n      aria-describedby=\"error-dialog-description\"\n    >\n      <DialogTitle id=\"error-dialog-title\">Error</DialogTitle>\n      <DialogContent>\n        {\n          typeof message === 'string'\n            ? <DialogContentText id=\"error-dialog-description\">{ message }</DialogContentText>\n            : message\n        }\n      </DialogContent>\n      <DialogActions>{ renderActions() }</DialogActions>\n    </Dialog>\n  ) || null;\n};\n\nexport default ErrorModal;\n","import Snackbar from '@material-ui/core/Snackbar';\nimport React, { Component, ReactNode } from 'react';\n\nexport type SuccessSnackbarProps = {\n  message: ReactNode,\n  action?: ReactNode\n}\n\nclass SuccessSnackbar extends Component<SuccessSnackbarProps> {\n  state = { open: true };\n\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    const {\n      open,\n    } = this.state;\n    const {\n      message,\n      action,\n    } = this.props;\n\n    return <Snackbar\n      open={ open }\n      onClose={ this.handleClose }\n      message={ message }\n      action={ action }\n    />;\n  }\n}\n\nexport default SuccessSnackbar;\n"],"names":["useModal","useState","isOpen","data","setModalState","open","useCallback","close","undefined","useModals","modalNames","reduce","acc","modalName","modalState","oldState","useIncrementalKey","useReducer","oldKey","key","incrementKey","uuid","replace","c","r","Math","random","v","toString","deepGet","obj","property","defaultValue","test","properties","split","slice","join","indexOf","deepSet","value","d","marker","args","res","console","log","lett","closure","debounce","callback","time","interval","clearTimeout","setTimeout","theme","createStyles","pagination","display","justifyContent","actionsCol","width","spacing","padding","actionsButton","thumbnail","maxWidth","maxHeight","thumbnailWrapper","paddingRight","textAlign","thumbnailRowWrapper","paddingTop","paddingBottom","lineHeight","MenuAction","forwardRef","ref","name","label","color","onClick","actionTarget","closeActionsMenu","Icon","DVKTable","actionsMenuAnchor","handleSort","props","onPaginationSortUpdate","sort","orderBy","order","newOrder","page","_event","setState","row","column","classes","type","imgData","clsx","id","project","event","stopPropagation","currentTarget","className","rows","columns","onRowClick","actions","total","emptyRows","rowsPerPage","min","map","noSort","createSortHandler","syntheticId","cursor","renderCell","renderActions","height","length","handleChangePage","root","state","renderTable","renderPagination","action","Component","withStyles","styles","createDefaultActions","onEdit","onClone","onDelete","EditIcon","CloneIcon","DeleteIcon","filter","it","SlideUp","InfoModal","message","title","onClose","FormContext","React","createContext","updateProperty","updatePropertyF","InputCheckbox","required","disabled","text","checkboxProps","hasError","useContext","useLabelAsText","checkboxText","filterDuplicates","options","uniqueSet","Set","option","has","add","InputComboBox","autoFocus","multiple","staticOptions","search","renderOption","opt","setOpen","loading","setLoading","inputValue","setInputValue","setOptions","debouncedSearch","useMemo","input","then","getOptionSelected","multipleValue","names","find","some","simpleValue","useEffect","active","results","oldOptions","FormControl","_","newValue","createFilterOptions","params","target","InputProps","endAdornment","InputDateTime","commonProps","fullWidth","autoOk","margin","onChange","error","helperText","InputDefault","multiline","autoComplete","makeStyles","expansionPanelContent","overflow","expansionPanelTable","marginLeft","marginRight","expansionPanelNoContent","expansionPanelHeading","fontSize","typography","pxToRem","fontWeight","fontWeightRegular","expansionPanelButtonsWrapper","marginTop","iconLeft","marginBottom","InputFile","acceptedFileType","useStyles","selectedFileName","setSelectedFileName","inputRef","useRef","onFileSelected","files","listFiles","Array","from","fileName","file","clearField","e","current","preventDefault","FormHelperText","InputHidden","InputImage","setThumbnail","fileReader","FileReader","onload","result","readAsDataURL","ConfirmationModal","onCancel","onAccept","children","FlexExpander","flex","isHiddenField","field","InputList","newLabel","editLabel","deleteLabel","deleteMessage","fields","accordionProps","InputModal","isAddModalOpen","openAddModal","closeAddModal","isEditModalOpen","editModalData","openEditModal","closeEditModal","isDeleteModalOpen","deleteModalData","openDeleteModal","closeDeleteModal","createKey","incrementCreateKey","values","isEqual","val1","val2","toLowerCase","oldValues","InputSelect","convertValue","strip","newObj","__typename","needsStripping","stripSyntheticIds","Object","keys","isArray","defaultProps","DVKForm","bottomContent","ContentWrapper","Fragment","ActionsWrapper","onSubmit","invalidFields","setObj","innerInvalidFields","setInnerInvalidFields","formId","isInfoModalOpen","infoModalData","openInfoModal","closeInfoModal","handleSubmit","requiredFields","requiredErrors","checked","oldObj","newObject","oldInvalidFields","update","getErrorMessage","errorMessageCode","errorMessage","code","renderInputField","errorProps","renderInputBox","infoModal","IconButton","buttonProps","concat","fixed","position","right","bottom","FloatingButton","formKey","onCreate","saveLabel","actualRenderActions","DialogContent","DialogActions","ErrorModal","SuccessSnackbar","handleClose"],"mappings":"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"}